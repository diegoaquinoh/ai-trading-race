name: CI - Full Pipeline

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main, develop ]
  workflow_dispatch:  # Allow manual trigger

jobs:
  backend:
    name: Backend CI
    uses: ./.github/workflows/backend.yml

  functions:
    name: Functions CI
    uses: ./.github/workflows/functions.yml

  frontend:
    name: Frontend CI
    uses: ./.github/workflows/frontend.yml

  ml-service:
    name: ML Service CI
    uses: ./.github/workflows/ml-service.yml

  integration-readiness:
    name: Integration Readiness Check
    runs-on: ubuntu-latest
    needs: [backend, functions, frontend, ml-service]
    
    steps:
      - name: Summary
        run: |
          echo "ðŸŽ‰ All CI checks passed!"
          echo ""
          echo "âœ… Backend build successful"
          echo "âœ… Functions build successful"
          echo "âœ… Frontend build successful"
          echo "âœ… ML Service build successful"
          echo ""
          echo "Ready for deployment when Azure is configured."
