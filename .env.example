# AI Trading Race - Environment Variables (Single Source of Truth)
# Copy this file to .env and update with your values
# This file is used by:
# - docker-compose.yml (infrastructure)
# - scripts/*.sh (database scripts)
# - All application services via symlinks or env loading

# ============================================
# Database Configuration (SQL Server)
# ============================================
# SQL Server SA Password (matches docker-compose.yml)
# ⚠️ SECURITY: Generate a secure password before use!
# Generate with: openssl rand -base64 24 | tr -d '/+='
export SA_PASSWORD=<GENERATE_SECURE_PASSWORD>

# SQL Server Container Name
export SQL_CONTAINER_NAME=ai-trading-sqlserver

# SQL Server Database Name
export SQL_DATABASE_NAME=AiTradingRace

# SQL Server Connection
export SQL_SERVER=localhost
export SQL_PORT=1433
export SQL_USER=sa

# Connection String (for .NET applications)
# ⚠️ Replace <SA_PASSWORD> with your actual password
export ConnectionStrings__TradingDb="Server=localhost,1433;Database=AiTradingRace;User Id=sa;Password=<SA_PASSWORD>;TrustServerCertificate=True"

# ============================================
# Redis Configuration
# ============================================
export REDIS_HOST=localhost
export REDIS_PORT=6379
export REDIS_DB=0
export REDIS_PASSWORD=
export REDIS_TTL_SECONDS=3600

# ============================================
# ML Service Configuration
# ============================================
# ⚠️ SECURITY: Generate a secure API key before use!
# Generate with: openssl rand -base64 32 | tr -d '/+='
export ML_SERVICE_API_KEY=<GENERATE_32_CHAR_API_KEY>
export ML_SERVICE_MODEL_PATH=models/trading_model.pkl
export ML_SERVICE_MODEL_VERSION=1.0.0
export ML_SERVICE_LOG_LEVEL=INFO
export ML_SERVICE_ALLOWED_ORIGIN=
export ML_SERVICE_REDIS_ENABLED=true
export ML_SERVICE_REDIS_HOST=redis
export ML_SERVICE_REDIS_PORT=6379
export ML_SERVICE_REDIS_DB=0
export ML_SERVICE_REDIS_TTL_SECONDS=3600

# Custom ML Service URL (for backend to call)
export CustomMlAgent__BaseUrl=http://localhost:8000
# ⚠️ Use the same value as ML_SERVICE_API_KEY
export CustomMlAgent__ApiKey=<SAME_AS_ML_SERVICE_API_KEY>
export CustomMlAgent__TimeoutSeconds=60

# ============================================
# Llama API Configuration (Groq)
# ============================================
export Llama__Provider=Groq
export Llama__BaseUrl=https://api.groq.com/openai/v1
export Llama__Model=llama-3.3-70b-versatile
# ⚠️ Get your API key from https://console.groq.com/
export Llama__ApiKey=<YOUR_GROQ_API_KEY>
export Llama__TimeoutSeconds=60
export Llama__MaxRetries=3

# ============================================
# CoinGecko API Configuration
# ============================================
# ⚠️ REQUIRED - Get a free Demo API key at https://www.coingecko.com/en/api/pricing
export CoinGecko__ApiKey=<YOUR_COINGECKO_DEMO_API_KEY>
export CoinGecko__BaseUrl=https://api.coingecko.com/api/v3/
export CoinGecko__TimeoutSeconds=30
export CoinGecko__DefaultDays=1

# ============================================
# Backend API Configuration (.NET)
# ============================================
export ASPNETCORE_ENVIRONMENT=Development
export Logging__LogLevel__Default=Information
export Logging__LogLevel__Microsoft_AspNetCore=Warning
export AllowedOrigins="http://localhost:5173,http://localhost:3000"

# ============================================
# Frontend Configuration (React/Vite)
# ============================================
export VITE_API_URL=http://localhost:5001
export VITE_WS_URL=ws://localhost:5000/ws
export VITE_ENABLE_WEBSOCKETS=false
export VITE_ENABLE_DARK_MODE=true
export VITE_ENABLE_ADVANCED_CHARTS=true
export VITE_REFRESH_INTERVAL_MS=30000
export VITE_LEADERBOARD_REFRESH_MS=10000
export NODE_ENV=development

# ============================================
# Portfolio Configuration
# ============================================
# Starting balance for new portfolios
export STARTING_BALANCE=100000.00

# ============================================
# Azure OpenAI (Legacy - Optional)
# ============================================
export AzureOpenAI__Endpoint=
export AzureOpenAI__ApiKey=
export AzureOpenAI__DeploymentName=

# ============================================
# Azure Deployment Configuration
# ============================================
# Used by scripts/deploy-infra.sh to provision Azure resources
# ⚠️ SECURITY: Generate a secure JWT key before use!
# Generate with: openssl rand -base64 64 | tr -d '/+='
export JWT_SECRET_KEY=<GENERATE_SECURE_JWT_KEY>

# GitHub Container Registry (for ML service image)
export GHCR_USERNAME=<YOUR_GITHUB_USERNAME>
# ⚠️ Generate a GitHub PAT with read:packages scope
export GHCR_PASSWORD=<YOUR_GITHUB_PAT>

# GitHub repo (for Static Web App auto-deploy)
export GITHUB_REPO_URL=https://github.com/<owner>/<repo>
# ⚠️ Generate a GitHub PAT with repo scope
export GITHUB_TOKEN=<YOUR_GITHUB_TOKEN>

# Production domain used for CORS origins
export PRODUCTION_DOMAIN=<YOUR_PRODUCTION_DOMAIN>

# ============================================
# Usage Instructions
# ============================================
# 1. Copy this file: cp .env.example .env
# 2. Generate secure secrets:
#    SA_PASSWORD=$(openssl rand -base64 24 | tr -d '/+=')
#    ML_SERVICE_API_KEY=$(openssl rand -base64 32 | tr -d '/+=')
# 3. Update .env with generated values and your Groq API key
# 4. Start Docker services: docker compose up -d
# 5. Source for scripts: source .env
# 6. Run database setup: ./scripts/setup-database.sh
# 7. Start backend: cd AiTradingRace.Web && dotnet run
# 8. Start frontend: cd ai-trading-race-web && npm run dev
#
# Note: docker-compose.yml automatically reads .env file
# The scripts and applications will use these same values for consistency.
